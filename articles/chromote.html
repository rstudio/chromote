<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>chromote • chromote</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="chromote">
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">chromote</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/chromote.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/commands-and-events.html">Commands and events</a></li>
    <li><a class="dropdown-item" href="../articles/sync-async.html">Synchronous vs. asynchronous usage</a></li>
    <li><a class="dropdown-item" href="../articles/which-chrome.html">Choosing which Chrome-based browser to use</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/example-loading-page.html">Loading a page reliably</a></li>
    <li><a class="dropdown-item" href="../articles/example-screenshot.html">Taking a screenshot of a web page</a></li>
    <li><a class="dropdown-item" href="../articles/example-extract-text.html">Extracting text from a web page</a></li>
    <li><a class="dropdown-item" href="../articles/example-attach-existing.html">Attaching to existing tabs</a></li>
    <li><a class="dropdown-item" href="../articles/example-authentication.html">Websites that require authentication</a></li>
    <li><a class="dropdown-item" href="../articles/example-custom-headers.html">Setting custom headers</a></li>
    <li><a class="dropdown-item" href="../articles/example-custom-user-agent.html">Setting custom user agent</a></li>
    <li><a class="dropdown-item" href="../articles/example-remote-hosts.html">Chrome on remote hosts</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rstudio/chromote/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>chromote</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rstudio/chromote/blob/rc-v0.5.0/vignettes/chromote.Rmd" class="external-link"><code>vignettes/chromote.Rmd</code></a></small>
      <div class="d-none name"><code>chromote.Rmd</code></div>
    </div>

    
    
<p>Chromote is an R implementation of the <a href="https://chromedevtools.github.io/devtools-protocol/" class="external-link">Chrome
DevTools Protocol</a>. It works with Chrome, Chromium, Opera, Vivaldi,
and other browsers based on <a href="https://www.chromium.org/" class="external-link">Chromium</a>. By default it uses Google
Chrome (which must already be installed on the system). To use a
different browser, see <code><a href="../articles/which-chrome.html">vignette("which-chrome")</a></code>.</p>
<p>Chromote is not the only R package that implements the Chrome
DevTools Protocol. Here are some others:</p>
<ul>
<li>
<a href="https://github.com/RLesur/crrri" class="external-link">crrri</a> by Romain Lesur
and Christophe Dervieux</li>
<li>
<a href="https://github.com/hrbrmstr/decapitated/" class="external-link">decapitated</a>
by Bob Rudis</li>
<li>
<a href="https://github.com/milesmcbain/chradle" class="external-link">chradle</a> by
Miles McBain</li>
</ul>
<p>The interface to Chromote is similar to <a href="https://github.com/cyrus-and/chrome-remote-interface" class="external-link">chrome-remote-interface</a>
for node.js.</p>
<div class="section level2">
<h2 id="features">Features<a class="anchor" aria-label="anchor" href="#features"></a>
</h2>
<ul>
<li><p>Install and use specific versions of Chrome from the <a href="https://googlechromelabs.github.io/chrome-for-testing/" class="external-link">Chrome for
Testing</a> service.</p></li>
<li><p>Offers a synchronous API for ease of use and an asynchronous API
for more sophisticated tasks.</p></li>
<li><p>Full support for the Chrome DevTools Protocol for any version of
Chrome or any Chrome-based browser.</p></li>
<li><p>Includes convenience methods, like <code>$screenshot()</code> and
<code>$set_viewport_size()</code>, for common tasks.</p></li>
<li><p>Automatically reconnects to previous sessions if the connection
from R to Chrome is lost, for example when restarting from sleep
state.</p></li>
<li><p>Powers many higher-level packages and functions, like
<a href="https://rstudio.github.io/shinytest2/" class="external-link">shinytest2</a> and
<code>rvest::read_html_live()</code>.</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the released version of chromote from CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"chromote"</span><span class="op">)</span></span></code></pre></div>
<p>Or install the development version from GitHub with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"rstudio/chromote"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>This will start a headless browser and open an interactive viewer for
it in a normal browser, so that you can see what the headless browser is
doing.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rstudio.github.io/chromote/">chromote</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ChromoteSession.html">ChromoteSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># In a web browser, open a viewer for the headless browser. Works best with</span></span>
<span><span class="co"># Chromium-based browsers.</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">view</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>The browser can be given <em>commands</em>, as specified by the <a href="https://chromedevtools.github.io/devtools-protocol/" class="external-link">Chrome
DevTools Protocol</a>. For example, <code>$Browser$getVersion()</code>
(which corresponds to the <a href="https://chromedevtools.github.io/devtools-protocol/tot/Browser/#method-getVersion" class="external-link">Browser.getVersion</a>
in the API docs) will query the browser for version information:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span><span class="op">$</span><span class="va">Browser</span><span class="op">$</span><span class="fu">getVersion</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; $protocolVersion</span></span>
<span><span class="co">#&gt; [1] "1.3"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $product</span></span>
<span><span class="co">#&gt; [1] "HeadlessChrome/98.0.4758.102"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $revision</span></span>
<span><span class="co">#&gt; [1] "@273bf7ac8c909cde36982d27f66f3c70846a3718"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $userAgent</span></span>
<span><span class="co">#&gt; [1] "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/98.0.4758.102 Safari/537.36"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $jsVersion</span></span>
<span><span class="co">#&gt; [1] "9.8.177.11"</span></span></code></pre></div>
<p>If you have the viewer open and run the following, you’ll see the web
page load in the viewer<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;This simple example works interactively, but if you’re
using chromote to programmatically take screenshots you’ll want to read
&lt;code&gt;&lt;a href="../articles/example-loading-page.html"&gt;vignette("example-loading-page")&lt;/a&gt;&lt;/code&gt; for a consistent and
reliable approach.&lt;/p&gt;'><sup>1</sup></a>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span><span class="op">$</span><span class="va">Page</span><span class="op">$</span><span class="fu">navigate</span><span class="op">(</span><span class="st">"https://www.r-project.org/"</span><span class="op">)</span></span></code></pre></div>
<p>In the official Chrome DevTools Protocol (CDP) documentation, this is
the <a href="https://chromedevtools.github.io/devtools-protocol/tot/Page/#method-navigate" class="external-link"><code>Page.navigate</code></a>
command.</p>
<p>In addition to full support of the CDP, <code>ChromoteSession</code>
objects also some convenience methods, like <code>$screenshot()</code>.
(See the Examples section below for more information about
screenshots.)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Saves to screenshot.png</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">screenshot</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Takes a screenshot of elements picked out by CSS selector</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="fu">screenshot</span><span class="op">(</span><span class="st">"sidebar.png"</span>, selector <span class="op">=</span> <span class="st">".sidebar"</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="../reference/figures/sidebar.png" alt="A screenshot of the sidebar of r-rproject.org, circa 2023."><div class="figcaption">A screenshot of the sidebar of r-rproject.org,
circa 2023.</div>
</div>
<blockquote>
<p><strong>Technical Note</strong></p>
<p>All members of <code>Chromote</code> and <code>ChromoteSession</code>
objects which start with a capital letter (like <code>b$Page</code>,
<code>b$DOM</code>, and <code>b$Browser</code>) correspond to domains
from the Chrome DevTools Protocol, and are documented in the <a href="https://chromedevtools.github.io/devtools-protocol/" class="external-link">official CDP
site</a>. All members which start with a lower-case letter (like
<code>b$screenshot</code> and <code>b$close</code>) are not part of the
Chrome DevTools Protocol, and are specific to <code>Chromote</code> and
<code>ChromoteSession</code>.</p>
</blockquote>
<p>Here is an example of how to use Chromote to find the position of a
DOM element using <a href="https://chromedevtools.github.io/devtools-protocol/tot/DOM/#method-getBoxModel" class="external-link">DOM.getBoxModel</a>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">DOM</span><span class="op">$</span><span class="fu">getDocument</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">DOM</span><span class="op">$</span><span class="fu">querySelector</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">root</span><span class="op">$</span><span class="va">nodeId</span>, <span class="st">".sidebar"</span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">DOM</span><span class="op">$</span><span class="fu">getBoxModel</span><span class="op">(</span><span class="va">x</span><span class="op">$</span><span class="va">nodeId</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 1</span></span>
<span><span class="co">#&gt;  $ model:List of 6</span></span>
<span><span class="co">#&gt;   ..$ content:List of 8</span></span>
<span><span class="co">#&gt;   .. ..$ : num 128</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 292</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 292</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   .. ..$ : num 128</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   ..$ padding:List of 8</span></span>
<span><span class="co">#&gt;   .. ..$ : num 112</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   .. ..$ : num 112</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   ..$ border :List of 8</span></span>
<span><span class="co">#&gt;   .. ..$ : num 112</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   .. ..$ : num 112</span></span>
<span><span class="co">#&gt;   .. ..$ : num 988</span></span>
<span><span class="co">#&gt;   ..$ margin :List of 8</span></span>
<span><span class="co">#&gt;   .. ..$ : int 15</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : int 28</span></span>
<span><span class="co">#&gt;   .. ..$ : num 308</span></span>
<span><span class="co">#&gt;   .. ..$ : num 1030</span></span>
<span><span class="co">#&gt;   .. ..$ : int 15</span></span>
<span><span class="co">#&gt;   .. ..$ : num 1030</span></span>
<span><span class="co">#&gt;   ..$ width  : int 195</span></span>
<span><span class="co">#&gt;   ..$ height : int 960</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-new-tabs-and-managing-the-process">Creating new tabs and managing the process<a class="anchor" aria-label="anchor" href="#creating-new-tabs-and-managing-the-process"></a>
</h2>
<p>To create a new tab/window:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="fu">new_session</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Once it’s created, you can perform operations with the new tab
without affecting the first one.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b1</span><span class="op">$</span><span class="fu">view</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b1</span><span class="op">$</span><span class="va">Page</span><span class="op">$</span><span class="fu">navigate</span><span class="op">(</span><span class="st">"https://github.com/rstudio/chromote"</span><span class="op">)</span></span>
<span><span class="co">#&gt; $frameId</span></span>
<span><span class="co">#&gt; [1] "714439EBDD663E597658503C86F77B0B"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $loaderId</span></span>
<span><span class="co">#&gt; [1] "F39339CBA7D1ACB83618FEF40C3C7467"</span></span></code></pre></div>
<p>To close a browser tab/window, you can run:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b1</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This is different from shutting down the browser process. If you call
<code>b$close()</code>, the browser process will still be running, even
if all tabs have been closed. If all tabs have been closed, you can
still create a new tab by calling <code>b1$new_session()</code>.</p>
<p>To shut down the process, call:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b1</span><span class="op">$</span><span class="va">parent</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><code>b1$parent</code> is a <code>Chromote</code> object (as opposed
to <code>ChromoteSession</code>), which represents the browser as a
whole. This is explained in <a href="#the-chromote-object-model">The
Chromote object model</a>.</p>
</div>
<div class="section level2">
<h2 id="commands-and-events">Commands and Events<a class="anchor" aria-label="anchor" href="#commands-and-events"></a>
</h2>
<p>The Chrome DevTools Protocol has two types of methods:
<em>commands</em> and <em>events</em>. The methods used in the previous
examples are commands. That is, they tell the browser to do something;
the browser does it, and then sends back some data. Learn more in
<code><a href="../articles/commands-and-events.html">vignette("commands-and-events")</a></code>.</p>
</div>
<div class="section level2">
<h2 id="the-chromote-object-model">The Chromote object model<a class="anchor" aria-label="anchor" href="#the-chromote-object-model"></a>
</h2>
<p>There are two R6 classes that are used to represent the Chrome
browser. One is <code>Chromote</code>, and the other is
<code>ChromoteSession</code>. A <code>Chromote</code> object represents
the browser as a whole, and it can have multiple <em>targets</em>, which
each represent a browser tab. In the Chrome DevTools Protocol, each
target can have one or more debugging <em>sessions</em> to control it. A
<code>ChromoteSession</code> object represents a single
<em>session</em>.</p>
<p>When a <code>ChromoteSession</code> object is instantiated, a target
is created, then a session is attached to that target, and the
<code>ChromoteSession</code> object represents the session. (It is
possible, though not very useful, to have multiple
<code>ChromoteSession</code> objects connected to the same target, each
with a different session.)</p>
<p>A <code>Chromote</code> object can have any number of
<code>ChromoteSession</code> objects as children. It is not necessary to
create a <code>Chromote</code> object manually. You can simply call:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ChromoteSession.html">ChromoteSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>and it will automatically create a <code>Chromote</code> object if
one has not already been created. The Chromote package will then
designate that <code>Chromote</code> object as the <em>default</em>
Chromote object for the package, so that any future calls to
<code>ChromoteSession$new()</code> will automatically use the same
<code>Chromote</code>. This is so that it doesn’t start a new browser
for every <code>ChromoteSession</code> object that is created.</p>
<p>In the Chrome DevTools Protocol, most commands can be sent to
individual sessions using the <code>ChromoteSession</code> object, but
there are some commands which can only be sent to the overall browser,
using the <code>Chromote</code> object.</p>
<p>To access the parent <code>Chromote</code> object from a
<code>ChromoteSession</code>, you can simply use
<code>$parent</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ChromoteSession.html">ChromoteSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="va">b</span><span class="op">$</span><span class="va">parent</span></span></code></pre></div>
<p>With a <code>Chromote</code> object, you can get a list containing
all the <code>ChromoteSession</code>s, with
<code>$get_sessions()</code>:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Normally, subsequent calls to <code>ChromoteSession$new()</code> will
use the existing <code>Chromote</code> object. However, if you want to
start a new browser process, you can manually create a
<code>Chromote</code> object, then spawn a session from it; or you can
pass the new <code>Chromote</code> object to
<code>ChromoteSession$new()</code>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cm</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/Chromote.html">Chromote</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="va">cm</span><span class="op">$</span><span class="fu">new_session</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Or:</span></span>
<span><span class="va">b1</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ChromoteSession.html">ChromoteSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>parent <span class="op">=</span> <span class="va">cm</span><span class="op">)</span></span></code></pre></div>
<p>Note that if you use either of these methods, the new
<code>Chromote</code> object <code>cm</code> will <em>not</em> be set as
the default that is used by future calls to
<code>ChromoteSesssion$new()</code>. See
<code><a href="../articles/which-chrome.html">vignette("which-chrome")</a></code> for an example showing how you can
set the default <code>Chromote</code> object.</p>
<p>There are also the following classes which represent the browser at a
lower level:</p>
<ul>
<li>
<code>Browser</code>: This represents an instance of a browser that
supports the Chrome DevTools Protocol. It contains information about how
to communicate with the Chrome browser. A <code>Chromote</code> object
contains one of these.</li>
<li>
<code>Chrome</code>: This is a subclass of <code>Browser</code> that
represents a local browser. It extends the <code>Browser</code> class
with a <code><a href="http://processx.r-lib.org/reference/process.html" class="external-link">processx::process</a></code> object, which represents the
browser’s system process.</li>
<li>
<code>ChromeRemote</code>: This is a subclass of
<code>Browser</code> that represents a browser running on a remote
system.</li>
</ul>
</div>
<div class="section level2">
<h2 id="debugging">Debugging<a class="anchor" aria-label="anchor" href="#debugging"></a>
</h2>
<p>Calling <code>b$debug_messages(TRUE)</code> will enable the printing
of all the JSON messages sent between R and Chrome. This can be very
helpful for understanding how the Chrome DevTools Protocol works.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/ChromoteSession.html">ChromoteSession</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="va">parent</span><span class="op">$</span><span class="fu">debug_messages</span><span class="op">(</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="va">Page</span><span class="op">$</span><span class="fu">navigate</span><span class="op">(</span><span class="st">"https://www.r-project.org/"</span><span class="op">)</span></span>
<span><span class="co">#&gt; SEND {"method":"Page.navigate","params":{"url":"https://www.r-project.org/"},"id":53,"sessionId":"12CB6B044A379DA0BDCFBBA55318247C"}</span></span>
<span><span class="co">#&gt; $frameId</span></span>
<span><span class="co">#&gt; [1] "BAAC175C67E55886207BADE1776E7B1F"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $loaderId</span></span>
<span><span class="co">#&gt; [1] "66DED3DF9403DA4A307444765FDE828E"</span></span>
<span></span>
<span><span class="co"># Disable debug messages</span></span>
<span><span class="va">b</span><span class="op">$</span><span class="va">parent</span><span class="op">$</span><span class="fu">debug_messages</span><span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="resource-cleanup-and-garbage-collection">Resource cleanup and garbage collection<a class="anchor" aria-label="anchor" href="#resource-cleanup-and-garbage-collection"></a>
</h2>
<p>When Chromote starts a Chrome process, it calls
<code>Chrome$new()</code>. This launches the Chrome process it using
<code><a href="http://processx.r-lib.org/reference/process.html" class="external-link">processx::process()</a></code>, and enables a supervisor for the
process. This means that if the R process stops, the supervisor will
detect this and shut down any Chrome processes that were registered with
the supervisor. This prevents the proliferation of Chrome processes that
are no longer needed.</p>
<p>The Chromote package will, by default, use a single Chrome process
and a single <code>Chromote</code> object, and each time
<code>ChromoteSession$new()</code> is called, it will spawn them from
the <code>Chromote</code> object. See <a href="#the-chromote-object-model">The Chromote object model</a> for more
information.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/wch" class="external-link">Winston Chang</a>, <a href="http://schloerke.com" class="external-link">Barret Schloerke</a>, <a href="https://garrickadenbuie.com" class="external-link">Garrick Aden-Buie</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer>
</body>
</html>
